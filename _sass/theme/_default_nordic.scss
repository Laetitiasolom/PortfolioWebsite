$nordic-bg: #E8EEF2;
$nordic-text: #607D8B;
/* Muted Blue/Grey as requested */
$nordic-text-light: lighten($nordic-text, 20%);
$nordic-accent: #2E8B57;
/* Forest Green */
$nordic-accent-hover: darken($nordic-accent, 10%);
$nordic-border: #d1d6da;

$nordic-font-family: "Futura", "Century Gothic", "Avant Garde", "Tw Cen MT", sans-serif;

html[data-theme="nordic"] {
    --global-base-color : #{$nordic-text};
    --global-bg-color : #{$nordic-bg};
    --global-footer-bg-color : #{mix(#fff, $nordic-bg, 50%)};
    --global-border-color : #{$nordic-border};
    --global-dark-border-color : #{darken($nordic-border, 20%)};
    --global-code-background-color : #{mix(#fff, $nordic-bg, 50%)};
    --global-code-text-color : #{$nordic-text};
    --global-fig-caption-color : #{$nordic-text-light};
    --global-link-color : #{$nordic-accent};
    --global-link-color-hover : #{$nordic-accent-hover};
    --global-link-color-visited : #{lighten($nordic-accent, 10%)};
    --global-masthead-link-color : #{$nordic-text};
    --global-masthead-link-color-hover : #{$nordic-accent};
    --global-text-color : #{$nordic-text};
    --global-text-color-light : #{$nordic-text-light};
    --global-thead-color : #{$nordic-border};

    /* Background Image with Increased Opacity */
    body {
        position: relative;
        background-color: $nordic-bg;
        font-family: $nordic-font-family;

        &::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('../../images/themes/nordic-bg.png');
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center;
            opacity: 0.5;
            /* Increased opacity for better visibility as requested */
            z-index: -1;
            pointer-events: none;
        }
    }

    /* Standard Layout overrides for Nordic Theme */
    /* Standard Layout overrides for Nordic Theme */
    .page__content {
        background: rgba(255, 255, 255, 0.85);
        /* Restore slight card effect for readability */
        padding: 2em;
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        backdrop-filter: blur(5px);
        margin-top: 2em;
        margin-bottom: 2em;
        /* Removed width: 100% and max-width override to let Susy grid handle it */
        margin-left: auto;
        margin-right: auto;
        position: relative;
        /* Context for children */
        z-index: 10;
        /* Ensure content stays above background */
    }

    /* Fix for Archive/Publication Pages centering issues */
    .archive {
        /* Removed width: 100% to restore sidebar compatibility */
        /* Only apply max-width if needed, but Susy handles columns */
        margin-left: auto;
        margin-right: auto;
        padding-right: 0;
        /* Remove default padding causing shift */
    }

    /* Adjust Grid for Split Layout consistency */
    @media (min-width: 64em) {
        .page {
            padding-right: 0;
            /* Fixes right-padding issue in standard layouts */
        }
    }

    /* Sidebar Styling - Big Profile Photo Overlap */
    /* Sidebar Styling - Big Profile Photo Overlap */
    .sidebar {
        background: transparent;
        margin-top: -80px;
        /* Pull sidebar up to overlap header */
        z-index: 20;
        position: relative;

        /* Make sidebar wider */
        @include breakpoint($large) {
            @include span(3 of 12);
            /* Increased from 2 to 3 of 12 */
            width: span(3 of 12);
        }

        .author__avatar {
            img {
                width: 200px;
                /* Bigger profile photo */
                height: 200px;
                border-radius: 50%;
                border: 4px solid #fff;
                /* White border for contrast against header/bg */
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                object-fit: cover;
            }
        }

        .author__name {
            font-family: $nordic-font-family;
            color: $nordic-text;
            margin-top: 1em;
        }

        .author__bio {
            color: $nordic-text-light;
        }
    }

    /* Adjust Content Width to Accommodate Wider Sidebar */
    .archive,
    .page {
        /* Removed width: 100% to restore sidebar compatibility */
        /* Only apply max-width if needed, but Susy handles columns */
        margin-left: auto;
        margin-right: auto;
        padding-right: 0;

        /* Remove default padding causing shift */
        @include breakpoint($large) {
            @include span(8 of 12 last);
            /* Content takes 8 columns */
            @include prefix(4 of 12);
            /* Offset by 4 columns (clears 3-col sidebar + 1-col gap) */
            padding-right: 0;
        }
    }


    .masthead {
        /* Clean Background, Gradient on Text */
        background: rgba(255, 255, 255, 0.95);
        /* Light/Clean background */
        border-bottom: 1px solid $nordic-border;
        padding-bottom: 2em;
        /* Extra padding for overlap space */
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);

        .masthead__inner-wrap {
            font-family: $nordic-font-family;
            max-width: 1280px;
            /* Match content width */
        }

        .site-title {
            /* Gradient Text */
            background: linear-gradient(135deg, #2F4F4F 0%, #2E8B57 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            color: transparent;
            font-size: 2em;
            font-weight: 800;
            /* Bolder to make gradient visible */
        }

        .masthead__menu-item:not(#theme-toggle) a {
            color: $nordic-text;
            /* Standard text color on light bg */
            font-weight: 600;
            transition: color 0.3s ease;

            &:hover {
                color: $nordic-accent;
                /* Accent color on hover */
                text-decoration: underline;
            }
        }
    }
}